FROM authzed/spicedb:v1.12.0

ARG SPICEDB_GRPC_PRESHARED_KEY
ENV SPICEDB_GRPC_PRESHARED_KEY=${SPICEDB_GRPC_PRESHARED_KEY}
ARG SPICEDB_DATASTORE_ENGINE
ENV SPICEDB_DATASTORE_ENGINE=${SPICEDB_DATASTORE_ENGINE}
ARG SPICEDB_DATASTORE_CONN_URI
ENV SPICEDB_DATASTORE_CONN_URI=${SPICEDB_DATASTORE_CONN_URI}

ENTRYPOINT ["spicedb", "serve"]

EXPOSE 50051/tcp 8080/tcp 9090/tcp